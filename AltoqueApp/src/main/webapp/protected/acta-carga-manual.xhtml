<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:adm="http://github.com/adminfaces"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="#{layoutMB.template}">

    <ui:define name="metadata">


        <style type="text/css">
            .ui-grid-row .ui-grid-col-2,
            .ui-grid-row .ui-grid-col-10 {
                padding: 0.5em 0;
                margin-left: 10px;
            }

            .ui-g-12, .ui-sm-12 {
                padding-left: 0;
                padding-right: 0;
            }

            .ui-datagrid-column .ui-panel.ui-widget-content {
                border: none;
            }


        </style>
    </ui:define>


    <ui:define name="title">
        Carga de Actas
    </ui:define>

    <ui:define name="description">
        Carga manual de actas de escrutinio
    </ui:define>


    <ui:define name="body">

        <ui:include src="/protected/dialogos/detalleActa.xhtml" />
        <ui:include src="/protected/dialogos/resultadosNacional.xhtml" />
        <ui:include src="/protected/dialogos/resultadosProvincial.xhtml" />

        <style type="text/css">
            .grisar {
                background-color: #000000 !important;
                background-image: none !important;
                color: #000000 !important;
            }
        </style>
        <h:form enctype="multipart/form-data"  >


            <p:spacer height="15px"/>
            <div class="ui-fluid">

                <p:panelGrid columns="2" columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                             layout="grid" styleClass="ui-fluid card">
                    <p:outputLabel for="input" value="Numero de Mesa"/>
                    <p:inputText type="number" id="input" value="#{fiscalActasList.actaManual.mesa}"/>


                    <p:outputLabel for="calendar" value="Fecha"/>
                    <p:calendar id="calendar" showOn="button"  value="#{fiscalActasList.actaManual.fecha}"/>


                    <p:outputLabel for="manyBtn" value="Tipo de Acta"/>
                    <p:selectOneButton id="manyBtn"
                                       value="#{fiscalActasList.tipo}">
                        <f:selectItem itemLabel="Nacional" itemValue="nacional"/>
                        <f:selectItem itemLabel="Provincial" itemValue="provincial"/>
                    </p:selectOneButton>

                    <p:outputLabel for="manyBtn" value="Imagen"/>


                    <p:fileUpload mode="simple" value="#{fiscalActasList.uploadedFile}" />
                    
                </p:panelGrid>

                <div class="ui-sm-12 ui-g-12 ui-g-nopad">     
                    <div class="ui-sm-12 ui-g-12"> 

                        <p:commandButton  value="Cargar" id="withIcon"  
                                          update=":fActasMan:dtActasManuales"
                                          process="@form" ajax="false"
                                          action="#{fiscalActasList.cargarActaManual()}" styleClass="btn-success" icon="fa fa-check" />
                    </div>

                </div> 


            </div>
        </h:form>
        <h:form id="fActasMan">
            <div class="ui-g-12">

                <p:dataTable widgetVar="fiscalActasTable" id="dtActasManuales" var="acta" value="#{fiscalActasList.lstFiscalActasManual}" rows="10"
                             rowKey="#{acta.id}" paginator="true" 
                             emptyMessage="No hay actas para mostrar"
                             filteredValue="#{fiscalActasList.filteredValue}"
                             paginatorPosition="bottom" selection="#{fiscalActasList.selectedFiscalActas}"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {JumpToPageDropdown}"
                             currentPageReportTemplate="[ {startRecord} to {endRecord} of {totalRecords} ]"
                             rowsPerPageTemplate="5,10,15,20,30"
                             >



                    <p:column filterBy="#{acta.id}" sortBy="#{acta.id}"
                              style="word-wrap:break-word;">
                        <f:facet name="header">
                            <h:outputText value="Acta ID"/>
                        </f:facet>
                        <h:outputText value="#{acta.id}"/>
                    </p:column>

                    <p:column filterBy="#{acta.fecha}" sortBy="#{acta.fecha}"
                              style="word-wrap:break-word;">
                        <f:facet name="header">
                            <h:outputText value="Fecha"/>
                        </f:facet>
                        <h:outputText value="#{acta.fecha}">
                            <f:convertDateTime pattern="dd.MM.yyyy HH:mm" />
                        </h:outputText>

                    </p:column>


                    <p:column filterBy="#{acta.mesa}" sortBy="#{acta.mesa}"
                              style="word-wrap:break-word;">
                        <f:facet name="header">
                            <h:outputText value="Mesa"/>
                        </f:facet>
                        <h:outputText value="#{acta.mesa}"/>
                    </p:column>

                    <p:column filterBy="#{acta.tipo}" sortBy="#{acta.tipo}"
                              style="word-wrap:break-word;">
                        <f:facet name="header">
                            <h:outputText value="Distrito"/>
                        </f:facet>
                        <h:outputText value="#{acta.tipo}"/>
                    </p:column>



                    <p:column filterBy="#{acta.isCargada}" sortBy="#{acta.isCargada}"
                              style="word-wrap:break-word;">
                        <f:facet name="header">
                            <h:outputText value="Cargada?"/>
                        </f:facet>
                        <h:outputText value="#{acta.isCargada ? 'Si' : 'No'}"/>
                    </p:column>
                    <p:column  style="text-align: center" headerText="Ver">
                        <p:commandButton update=":detalleActa:actaDetail"  oncomplete="PF('actaDialog').show()" icon="fa fa-search" title="View">
                            <f:setPropertyActionListener value="#{acta}" target="#{fiscalActasList.selectedFiscalActa}" />
                        </p:commandButton>
                    </p:column>

                    <p:column style="text-align: center" headerText="Cargar Resultados">
                        <p:commandButton  
                            update=":resultadosActa:actaResultados, :resultadosActaProv:actaResultadosProv" 
                            actionListener="#{candidatoListMB.cargar_candidatosVotos(acta)}"
                            icon="fa fa-bar-chart" 
                            title="Cargar resultados de acta">
                            <f:setPropertyActionListener value="#{acta}" target="#{actaFormMB.actaSelec}" />
                        </p:commandButton>
                    </p:column>

                </p:dataTable>

            </div>
        </h:form>

    </ui:define>



</ui:composition>
