<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:adm="http://github.com/adminfaces"
                
                >
                    
          <p:dialog header="Carga de Resultados Acta Provincial. (cargar votos haciendo clic en la celda)" position="top" widgetVar="dlg3" modal="true"  
                  responsive="true" draggable="false" height="800"    >

            <h:form id="resultadosActaProv">

                <p:outputPanel id="actaResultadosProv" >
                    <p:remoteCommand name="refreshFooter" 
                                     update="resultadosActaProv:candidatosProv:outputTotal1,
                                     resultadosActaProv:candidatosProv:outputTotal2,
                                     resultadosActaProv:candidatosProv:outputTotal3,
                                     resultadosActaProv:candidatosProv:outputTotal4,
                                     resultadosActaProv:candidatosProv:outputTotal5"/>
                    <p:dataTable id="candidatosProv" var="can" value="#{candidatoListMB.lstCandidatosVotos}" editable="true" 
                                 editMode="cell" widgetVar="cellCanProv"
                                 >

                        <p:columnGroup type="header" >

                            <p:column headerText="AgrupaciÃ³n"/>
                            <p:column headerText="Lista"/>
                            <p:column headerText="Cargo"/>
                            <p:column headerText="Cantidad de Votos GOBERNADOR Provincial"/>
                            <p:column headerText="Cantidad de Votos DIPUTADO Provincial "/>
                            <p:column headerText="Cantidad de Votos SENADOR Provincial"/>
                            <p:column headerText="Cantidad de Votos INTENDENTE Municipal "/>
                            <p:column headerText="Cantidad de Votos CONCEJAL Municipal "/>
                        </p:columnGroup>

                        <p:ajax event="cellEdit" listener="#{actaFormMB.onCellEdit(can)}" 
                                oncomplete="refreshFooter();"  process="@this"  partialSubmit="true"/>

                        <p:column visible="false"  >
                            <h:outputText value="#{can.candidato.candidato}" />
                        </p:column>
                        <p:column  >
                            <h:outputText value="#{can.candidato.agrupacion}" />
                        </p:column>
                        <p:column >
                            <h:outputText value="#{can.candidato.lista}" />
                        </p:column>

                        <p:column visible="true"  >
                            <h:outputText value="#{can.candidato.cargo}" />
                        </p:column>
                        <p:focus for="votos"  context="candidatos" />

                        <p:column   
                            styleClass="#{can.candidato.cargo ne 'gobernador' ? 'grisar' : null}" >
                            <p:cellEditor  disabled="#{can.candidato.cargo ne 'gobernador'}"   id="votosGobernador">
                                <f:facet name="output"><h:outputText value="#{can.cantidadVotos}" /></f:facet>
                                <f:facet name="input">
                                    <p:inputText    
                                        value="#{can.cantidadVotos}"

                                        placeholder="Ingrese cantidad de votos"  label="Votos">

                                    </p:inputText>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column 
                            styleClass="#{can.candidato.cargo ne 'diputado_provincial' ? 'grisar' : null}" >
                            <p:cellEditor disabled="#{can.candidato.cargo ne 'diputado_provincial'}"   id="votosDprov">
                                <f:facet  name="output"><h:outputText value="#{can.cantidadVotos}" /></f:facet>
                                <f:facet  name="input">
                                    <p:inputText     
                                        value="#{can.cantidadVotos}" 

                                        placeholder="Ingrese cantidad de votos"  label="Votos">

                                    </p:inputText>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column  
                            styleClass="#{can.candidato.cargo ne 'senador' ? 'grisar' : null}" >
                            <p:cellEditor disabled="#{can.candidato.cargo  ne 'senador'}"   id="votosSenador">
                                <f:facet name="output"><h:outputText value="#{can.cantidadVotos}" /></f:facet>
                                <f:facet name="input">
                                    <p:inputText    
                                        value="#{can.cantidadVotos}"

                                        placeholder="Ingrese cantidad de votos"  label="Votos">

                                    </p:inputText>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column 
                            styleClass="#{can.candidato.cargo ne 'intendente' ? 'grisar' : null}" >
                            <p:cellEditor disabled="#{can.candidato.cargo ne 'intendente' }"   id="votosIntendente">
                                <f:facet name="output"><h:outputText value="#{can.cantidadVotos}" /></f:facet>
                                <f:facet name="input">
                                    <p:inputText    
                                        value="#{can.cantidadVotos}" 

                                        placeholder="Ingrese cantidad de votos"  label="Votos">

                                    </p:inputText>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column  
                            styleClass="#{can.candidato.cargo ne 'concejales' ? 'grisar' : null}" >
                            <p:cellEditor disabled="#{can.candidato.cargo ne 'concejales'}"   id="votosConcejal">
                                <f:facet name="output"><h:outputText value="#{can.cantidadVotos}" /></f:facet>
                                <f:facet name="input">
                                    <p:inputText    
                                        value="#{can.cantidadVotos}" 

                                        placeholder="Ingrese cantidad de votos" label="Votos">

                                    </p:inputText>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>


                        <f:facet  name="footer">
                            <b> Total Gobernador:
                                <h:outputText style="font-size: x-large" id="outputTotal1" value="#{actaFormMB.votosGobernador}" />
                                <p:spacer width="20"></p:spacer>
                                Total Diputado Provincial:
                                <h:outputText   style="font-size: x-large" id="outputTotal2" value="#{actaFormMB.votosDipProv}" />
                                <p:spacer width="20"></p:spacer>
                                Total Senador:
                                <h:outputText style="font-size: x-large" id="outputTotal3" value="#{actaFormMB.votoSenador}" />
                                <p:spacer width="20"></p:spacer>
                                Total Intendente:
                                <h:outputText style="font-size: x-large" id="outputTotal4" value="#{actaFormMB.votosIntendente}" />
                                <p:spacer width="20"></p:spacer>
                                Total Concejal:
                                <h:outputText style="font-size: x-large" id="outputTotal5" value="#{actaFormMB.votosConcejal}" />
                                <p:spacer width="40"></p:spacer>

                            </b>
                        </f:facet>

                    </p:dataTable>

                    <div class="ui-sm-12 ui-g-12 ui-g-nopad">     
                        <div class="ui-sm-12 ui-g-12">

                            <p:commandButton  value="Guardar" id="withIcon"  
                                              update=":resultadosActa:candidatos, :fActasMan:dtActasManuales" 
                                              oncomplete="PF('dlg3').hide()" 
                                              action="#{actaFormMB.guardarActa()}" styleClass="btn-success" icon="fa fa-check" />
                        </div>

                    </div> 

                </p:outputPanel>
            </h:form>

        </p:dialog>   
    
    
    
    
</ui:composition>
